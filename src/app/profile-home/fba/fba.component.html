<div class="d-flex flex-column">
<div class="d-flex justify-content-start pay mb-2">
    <!--<button class="btn btn-outline-primary" type="submit" (click)="showSrv()">Показать все услуги</button>-->
 <!-- <button type="button" class="btn btn-outline-primary p-1" routerLink="/profile-home/cnt">Внести показания ПУ</button>-->
  <!--<button type="button" class="btn btn-outline-primary" (click)="sendJson()">Оплатить всё</button>-->
  <button [disabled]="loading" [disabled]="isLoaded" class="btn-outline-primary btn" rel="noopener noreferrer"  (click)="sendQRData()">Информационный документ для оплаты</button>

  <button type="button" [disabled]="loading" [disabled]="isLoaded" class="btn-outline-primary btn" rel="noopener noreferrer" (click)="formingQR()">QR-код для оплаты</button>

  <!--<button [disabled]="loading" class="btn-outline-primary btn " rel="noopener noreferrer"  (click)="sendFbaSrv()">Сформировать платеж</button>-->
  <!--<button [disabled]="loading" class="btn btn-outline-primary reset " type="button" (click)="getJsonData()">test</button>-->
  <button [disabled]="loading" [disabled]="isLoaded" class="btn btn-outline-primary reset " type="button" (click)="resetAllData()">Сброс</button>
  <div><img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" /></div>
  <!-- <button [disabled]="loading" type="button" class="btn btn-outline-primary" (click)="getPayDoc()">Квитанция</button>-->
  <!--<button type="button" class="btn btn-outline-primary" (click)="showSrv()">Все услуги</button>-->
  <!-- вызвать update fba/cnt -->
</div>


  <table class="table table-hover table-bordered table-responsive table-sm table-sup" cellspacing="0" width="auto">
    <thead class="text-center">
      <tr>
        <th scope="col">Наименование поставщика</th>
        <th scope="col">К оплате</th>
        <th scope="col">Платеж</th>
        <!--<th scope="col">Сумма АВ*</th>-->
        <th scope="col">Итого</th>
        <th scope="col">Остаток</th>
      </tr>
    </thead>
    <tbody>
    <tr *ngFor="let doc of fbaSuppliers;let index = index;trackBy:trackByIndex;"> <!--(click)="showSrv(doc.sup_id)"-->

      <td *ngIf="index != fbaSuppliers.length-1">{{doc.sup_name}}</td>
      <td *ngIf="index != fbaSuppliers.length-1" style="text-align: right">{{doc.sum_for_pay}}</td>
      <td *ngIf="index != fbaSuppliers.length-1" style="text-align: right">{{doc.sum_cur_pay}}</td>
      <!--<td *ngIf="index != fbaSuppliers.length-1" style="text-align: right">{{doc.sum_af}}</td>-->
      <td *ngIf="index != fbaSuppliers.length-1" style="text-align: right">{{doc.sum_pay_total}}</td>
      <td *ngIf="index != fbaSuppliers.length-1" style="text-align: right">{{doc.rest_e}}</td>

    </tr>
    <tr *ngFor="let doc of fbaSuppliers;let index = index;trackBy:trackByIndex;">
      <td *ngIf="index === fbaSuppliers.length-1">Агентское вознаграждение</td>
      <td *ngIf="index === fbaSuppliers.length-1" style="text-align: right">{{doc.sum_af}}</td>
      <td *ngIf="index === fbaSuppliers.length-1" style="text-align: right">{{doc.sum_af}}</td>
      <!--<td *ngIf="index != fbaSuppliers.length-1" style="text-align: right">{{doc.sum_af}}</td>-->
      <td *ngIf="index === fbaSuppliers.length-1" style="text-align: right">{{doc.sum_af}}</td>
      <td *ngIf="index === fbaSuppliers.length-1" style="text-align: right">{{doc.rest_e}}</td>

    </tr>
    <tr *ngFor="let doc of fbaSuppliers;let index = index;trackBy:trackByIndex;">
      <td *ngIf="index == fbaSuppliers.length-1">{{doc.sup_name}}</td>
      <td *ngIf="index == fbaSuppliers.length-1" style="text-align: right">{{doc.sum_for_pay}}</td>
      <td *ngIf="index == fbaSuppliers.length-1" style="text-align: right">{{doc.sum_pay_total}}</td>
      <!--<td *ngIf="fbaSuppliers.length == fbaSuppliers.length-1" style="text-align: right">{{doc.sum_af}}</td>-->
      <td *ngIf="index == fbaSuppliers.length-1" style="text-align: right">{{doc.sum_pay_total}}</td>
      <td *ngIf="index == fbaSuppliers.length-1" style="text-align: right">{{doc.rest_e}}</td>

    </tr>
    </tbody>
    <!--<span style="font-size:12px">*АВ - агентское вознаграждение</span>-->
  </table>



<div class="test" *ngIf="fba.length != 0" >

  <table class="table table-hover table-bordered  table-responsive table-sm table-srv" cellspacing="0" width="auto">
    <thead class="text-center">
    <tr>
      <th scope="col">Услуга</th>
      <th scope="col"></th>
      <th scope="col">К оплате</th>
      <th scope="col">Платеж</th>
     <!-- <th scope="col">Сумма АВ*</th>-->
      <th scope="col">Итого</th>
     <!-- <th scope="col">Остаток</th>
      <th scope="col" style="display:none;">Процент</th>
      -->
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let doc of fba;let index = index;trackBy:trackByIndex;">
      <td data-label="Услуга" *ngIf="index != fba.length-1" >{{doc.srv_name}}</td>

      <td data-label="" *ngIf="index != fba.length-1">{{doc.cnt_type}}</td>
      <td data-label="К оплате" style="text-align: right" *ngIf="index != fba.length-1">{{doc.sum_for_pay}}</td>

      <td data-label="Платеж"  *ngIf="index != fba.length-1"><input *ngIf="index != fba.length-1" min="0" type="number" step="0.01" lang="en" pattern="[0-9]+([\,][0-9]{2})?" [disabled]="doc.cnt_type == 'C'"
                                     class="form-control text-center" [(ngModel)]="doc.cur_pay" (change)="countCurPay(doc)" (blur)="setSumPay(doc.sup_id, doc.srv_id, doc.cur_pay)">
       <!-- <div *ngIf="index == fba.length-1" style="text-align: right">{{doc.cur_pay}}</div>-->
      </td>
  <!--    <td data-label="Сумма АВ*"  style="text-align: right">

        <input  readonly [disabled] *ngIf="index != fba.length-1" type="text" [(ngModel)]="doc.sum_af"
               class="form-control text-center">
        <div *ngIf="index == fba.length-1" style="text-align: right"> {{doc.sum_af}}</div>
      </td>
-->
      <td data-label="Итого" style="text-align: right"  *ngIf="index != fba.length-1">
        <!--<input readonly [disabled] *ngIf="index != fba.length-1" [(ngModel)]="doc.sum_for_pay_total"
               type="text" class="form-control text-center">-->
        <input readonly [disabled] *ngIf="index != fba.length-1" [(ngModel)]="doc.cur_pay"
               type="text" class="form-control text-center">
      <!--  <div *ngIf="index == fba.length-1" style="text-align: right"> {{doc.sum_for_pay_total}}</div>-->
      </td>


    </tr>

  <tr *ngFor="let doc of fba;let index = index;trackBy:trackByIndex;" >
    <td *ngIf="index == fba.length-1">Агентское вознаграждение</td>
    <td *ngIf="index == fba.length-1"></td>
    <td *ngIf="index == fba.length-1" style="text-align: right">{{doc.sum_af}}</td>
    <td *ngIf="index == fba.length-1" style="text-align: center">{{doc.sum_af}}</td>
    <td *ngIf="index == fba.length-1" style="text-align: right">{{doc.sum_af}}</td>
  </tr>

    <tr *ngFor="let doc of fba;let index = index;trackBy:trackByIndex;">
      <td *ngIf="index === fba.length-1">{{doc.srv_name}}</td>
      <td *ngIf="index === fba.length-1">{{doc.cnt_type}}</td>
      <td *ngIf="index === fba.length-1" style="text-align: right">{{doc.sum_for_pay}}</td>
      <td *ngIf="index === fba.length-1" style="text-align: center">{{doc.sum_for_pay_total}}</td>
      <td *ngIf="index === fba.length-1" style="text-align: right"> {{doc.sum_for_pay_total}}</td>
    </tr>
    </tbody>
  </table>


</div>
</div>
<button type="button" class="form-group btn btn-primary" [disabled]="isLoaded" routerLink="/profile-home/payment" (click)="setTotalPay()">Оплатить картой</button>

